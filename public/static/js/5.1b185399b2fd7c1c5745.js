webpackJsonp([5],{hIoU:function(e,t){},toDd:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Cz8s"),s=a("mzkE"),i=a("flCb"),r=a("XLwt"),o=a.n(r),l=a("g3lQ"),c={components:{headers:n.a,footers:s.a,routerNav:i.a},data:function(){return{online_cnt:"",offline_cnt:"",errorline_cnt:"",line_total:"",storeArr:[],timeArr:[],testArr:[],sn_active:"",spaceArr1:[],spaceArr2:[],spaceArr3:[],tableData:[]}},mounted:function(){this.queryInfo(),this.getTimess()},methods:{onchaneClass:function(e){return"new_cont_active"+(e+1)},drawColumn:function(){var e=o.a.init(document.getElementById("device_echars_r")),t={title:{text:this.$t("management.item_nav8"),x:"center"},tooltip:{trigger:"axis"},legend:{data:[this.$t("management.item_nav9")],top:"30px"},xAxis:{type:"category",boundaryGap:!1,data:this.testArr},yAxis:{type:"value"},series:[{name:this.$t("management.item_nav9"),type:"line",stack:"总量",data:this.storeArr}]};e.setOption(t),window.addEventListener("resize",function(){e.resize()})},drawLine:function(){var e=o.a.init(document.getElementById("device_echars_l")),t={title:{text:this.$t("management.item_nav5"),x:"center"},tooltip:{trigger:"axis"},legend:{data:[this.$t("management.item_nav6"),this.$t("management.item_nav7")],top:"30px"},toolbox:{show:!0,feature:{}},calculable:!0,xAxis:[{type:"value",boundaryGap:[0,.01]}],yAxis:[{type:"category",data:this.spaceArr3}],series:[{name:this.$t("management.item_nav6"),type:"bar",data:this.spaceArr2},{name:this.$t("management.item_nav7"),type:"bar",data:this.spaceArr1}]};e.setOption(t),window.addEventListener("resize",function(){e.resize()})},handleClick:function(e){var t=e.dev_sn;localStorage.setItem("dev_sn",t),this.$router.push({path:"/queryinfo"})},queryInfo:function(){var e=this,t=new Object;t.login_token=localStorage.getItem("userToken"),t.page_num=0,t.login_type=2,t.page_cnt=20,Object(l.e)(t).then(function(t){if(0!=t.status)e.$message({message:"网络错误，请重新请求",type:"error"});else{292==t.err_code&&e.$message({message:"用户暂未绑定设备",type:"error"});var a=t.data.bind_devinfo_list;e.sn_active=a[0].dev_sn;for(var n=0;n<a.length;n++){switch(a[n].dev_type){case 1:a[n].dev_type="初代西柚机"}switch(a[n].dev_online_state){case 1:a[n].dev_online_state="在线";break;case 0:a[n].dev_online_state="离线"}}e.tableData=t.data.bind_devinfo_list,e.online_cnt=t.data.online_cnt,e.errorline_cnt=t.data.exception_cnt,e.offline_cnt=t.data.offline_cnt,e.line_total=t.data.online_cnt+t.data.exception_cnt+t.data.offline_cnt;var s=t.token_info.login_token;localStorage.setItem("userToken",s),e.firstgetinfo_power(),e.firstgetinfo_space()}}).catch(function(e){})},openDetails:function(e){var t=this,a=new Object;a.login_token=localStorage.getItem("userToken"),a.start_time=1560873600,a.end_time=156096e4,a.dev_sn=e.dev_sn,a.login_type=2,Object(l.h)(a).then(function(e){if(0!=e.status)t.$message({message:"网络错误，请重新请求",type:"error"});else if(t.storeArr=[],e.data.dev_profit_list){var a=e.data.dev_profit_list,n=[];for(i=0;i<a.length;i++)n.push(a[i].store_ability.toFixed(4));t.storeArr=n,t.drawColumn()}else{for(var s=[],i=1;i<=7;i++)s.push(0);t.storeArr=s,t.drawColumn()}}).catch(function(e){t.$message({message:"网络错误，请重新请求",type:"error"})});var n=new Object;n.login_token=localStorage.getItem("userToken"),n.start_ts=Date.parse((new Date).toLocaleDateString())/1e3-604800,n.end_ts=Date.parse((new Date).toLocaleDateString())/1e3,n.dev_sn=e.dev_sn,n.login_type=2,Object(l.f)(n).then(function(e){if(0!=e.status)t.$message({message:"网络错误，请重新请求2",type:"error"});else{t.spaceArr1=[];for(var a=e.data.dev_phy_usage,n=[],s=[],i=[],r=0;r<a.length;r++)n.push((a[r].total_cap/1024/1024/1024).toFixed(2)),s.push((a[r].used_cap/1024/1024/1024).toFixed(2)),i.push(t.common.getTimes(1e3*a[r].ts));t.spaceArr1=n,t.spaceArr2=s,t.spaceArr3=i,t.drawLine()}}).catch(function(e){t.$message({message:"网络错误，请重新请求1",type:"error"})})},firstgetinfo_power:function(){var e=this,t=new Object;t.login_token=localStorage.getItem("userToken"),t.start_time=1560873600,t.end_time=156096e4,t.dev_sn=this.sn_active,t.login_type=2,Object(l.h)(t).then(function(t){if(0!=t.status)e.$message({message:"网络错误，请重新请求",type:"error"});else if(e.storeArr=[],t.data.dev_profit_list){var a=t.data.dev_profit_list,n=[];for(i=0;i<a.length;i++)n.push(a[i].store_ability.toFixed(4));e.storeArr=n,e.drawColumn()}else{for(var s=[],i=1;i<=7;i++)s.push(0);e.storeArr=s,e.drawColumn()}}).catch(function(t){e.$message({message:"网络错误，请重新请求",type:"error"})})},firstgetinfo_space:function(){var e=this,t=new Object;t.login_token=localStorage.getItem("userToken"),t.start_ts=Date.parse((new Date).toLocaleDateString())/1e3-604800,t.end_ts=Date.parse((new Date).toLocaleDateString())/1e3,t.dev_sn=this.sn_active,t.login_type=2,Object(l.f)(t).then(function(t){if(0!=t.status)e.$message({message:"网络错误，请重新请求",type:"error"});else{e.spaceArr1=[];for(var a=t.data.dev_phy_usage,n=[],s=[],i=[],r=0;r<a.length;r++)n.push((a[r].total_cap/1024/1024/1024).toFixed(2)),s.push((a[r].used_cap/1024/1024/1024).toFixed(2)),i.push(e.common.getTimes(1e3*a[r].ts));e.spaceArr1=n,e.spaceArr2=s,e.spaceArr3=i,e.drawLine()}}).catch(function(t){e.$message({message:"网络错误，请重新请求",type:"error"})})},getTimess:function(){for(var e=Date.parse((new Date).toLocaleDateString())/1e3,t=[],a=[],n=1;n<=7;n++)t.push(e-86400*n);for(var s=0;s<t.length;s++)a.push(this.common.getTimes(1e3*t[s]));this.testArr=a.reverse()}}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"management"},[a("routerNav"),e._v(" "),a("div",{staticClass:"management_title1"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"management_h1"},[e._v(e._s(e.$t("management.item_nav17")))])])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"new_cont new_cont_active1"},[a("div",{staticClass:"item_one"},[e._v(e._s(e.line_total))]),e._v(" "),a("div",{staticClass:"item_two"},[e._v(e._s(e.$t("management.item_nav1")))])])]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"new_cont new_cont_active2"},[a("div",{staticClass:"item_one"},[e._v(e._s(e.online_cnt))]),e._v(" "),a("div",{staticClass:"item_two"},[e._v(e._s(e.$t("management.item_nav2")))])])]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"new_cont new_cont_active3"},[a("div",{staticClass:"item_one"},[e._v(e._s(e.offline_cnt))]),e._v(" "),a("div",{staticClass:"item_two"},[e._v(e._s(e.$t("management.item_nav2")))])])]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"new_cont new_cont_active4"},[a("div",{staticClass:"item_one"},[e._v(e._s(e.errorline_cnt))]),e._v(" "),a("div",{staticClass:"item_two"},[e._v(e._s(e.$t("management.item_nav4")))])])])],1)],1),e._v(" "),a("div",{staticClass:"management_con2"},[a("el-row",{staticClass:"row_active"},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"echarts_div"},[a("div",{staticClass:"device_echars_l",attrs:{id:"device_echars_l"}})])]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"echarts_div"},[a("div",{staticClass:"device_echars_l",attrs:{id:"device_echars_r"}})])])],1),e._v(" "),a("el-row",{staticClass:"row_active",staticStyle:{"margin-top":"30px","margin-bottom":"30px"}},[a("el-col",{attrs:{span:24}},[a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"highlight-current-row":!0,border:""},on:{"row-click":e.openDetails}},[a("el-table-column",{attrs:{prop:"dev_name",label:e.$t("management.item_nav10")}}),e._v(" "),a("el-table-column",{attrs:{prop:"dev_type",label:e.$t("management.item_nav11")}}),e._v(" "),a("el-table-column",{attrs:{prop:"dev_sn",label:e.$t("management.item_nav12"),width:"300"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dev_online_state",label:e.$t("management.item_nav13")}}),e._v(" "),a("el-table-column",{attrs:{prop:"dev_mac",label:e.$t("management.item_nav14"),width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dev_ip",label:e.$t("management.item_nav15")}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("management.item_nav16")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return a.stopPropagation(),e.handleClick(t.row)}}},[e._v(e._s(e.$t("management.item_nav18")))])]}}])})],1)],1)])],1)],1)],1)},staticRenderFns:[]};var m=a("VU/8")(c,_,!1,function(e){a("hIoU")},null,null);t.default=m.exports}});